function C(o){window.enmity.plugins.registerPlugin(o)}const g=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars;const N=window.enmity.modules.common.Native,t=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts,window.enmity.modules.common.Dialog,window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const _=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const b=window.enmity.modules.common.Linking,R=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components;const L=window.enmity.modules.common.Locale;window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList;const P=e.Image;e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const D=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const h=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const S=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const m=e.FormRow,M=e.FormSection;e.FormSelect,e.FormSubLabel,e.FormSwitch,e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function k(o){return window.enmity.patcher.create(o)}var x="SuppressEmbeds",v="1.0.0",B="suppress embed on mobile!",V=[{name:"mafu",id:"519760564755365888"}],H="#333631",K={name:x,version:v,description:B,authors:V,color:H};function y(o){return window.enmity.assets.getIDByName(o)}const T={byProps:(...o)=>window.enmity.modules.filters.byProps(...o),byName:(o,n)=>window.enmity.modules.filters.byName(o,n),byTypeName:(o,n)=>window.enmity.modules.filters.byTypeName(o,n),byDisplayName:(o,n)=>window.enmity.modules.filters.byDisplayName(o,n)};function O(o,n){return window.enmity.modules.getModule(o,n)}function z(...o){return window.enmity.modules.bulk(...o)}function f(...o){return window.enmity.modules.getByProps(...o)}window.enmity.modules.common;const G=y("img_account_sync_github_white"),Y=y("Discord"),j=y("img_account_sync_twitter_white"),U=f("acceptInviteAndTransitionToInviteChannel");var q=({settings:o})=>{const n=R.createThemedStyleSheet({container:{flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:70,height:70,marginTop:20,marginLeft:20},title:{flexDirection:"column"},name:{fontSize:30,paddingTop:20,paddingLeft:20,paddingRight:30,color:g.ThemeColorMap.HEADER_PRIMARY},author:{fontSize:15,paddingLeft:50,color:g.ThemeColorMap.HEADER_SECONDARY},info:{height:45,paddingTop:3,paddingBottom:3,justifyContent:"center",alignItems:"center"},footer:{color:g.ThemeColorMap.HEADER_SECONDARY,textAlign:"center",paddingTop:10,paddingBottom:20}});return t.createElement(D,null,t.createElement(S,{style:n.container},t.createElement(P,{source:{uri:"https://avatars.githubusercontent.com/u/43488869"},style:n.image}),t.createElement(S,{style:n.title},t.createElement(h,{style:n.name},"SuppressEmbeds"),t.createElement(h,{style:n.author},"by mafu"))),t.createElement(M,{title:"INFORMATION"},t.createElement(m,{label:"Follow me on Twitter",style:n.info,trailing:m.Arrow,leading:t.createElement(m.Icon,{source:j}),onPress:()=>{b.openURL("https://twitter.com/m4fn3")}}),t.createElement(m,{label:"Visit my server for help",style:n.info,trailing:m.Arrow,leading:t.createElement(m.Icon,{source:Y}),onPress:()=>{U.acceptInviteAndTransitionToInviteChannel({inviteKey:"TrCqPTCrdq",context:{location:"Invite Button Embed"},callback:()=>{_.pop()}})}}),t.createElement(m,{label:"Check Source on GitHub",style:n.info,trailing:m.Arrow,leading:t.createElement(m.Icon,{source:G}),onPress:()=>{b.openURL("https://github.com/m4fn3/SuppressEmbeds")}})),t.createElement(h,{style:n.footer},`v${v}`))};function E(o,n,s){return window.enmity.utilities.findInReactTree(o,n,s)}const $=O(o=>{var n,s,l;return(l=(s=(n=o._dispatcher)==null?void 0:n._actionHandlers)==null?void 0:s._dependencyGraph)==null?void 0:l.nodes});$._dispatcher._actionHandlers._dependencyGraph.nodes;function W(o,n,s,l=!1){const[c,a]=z(T.byProps("EmojiRow"),T.byName("ActionSheet",!1)),{Version:p}=N.InfoDictionaryManager;parseInt(p.substring(0,3))>164?typeof a.default=="function"&&o.after(a,"default",(d,w,r)=>{const i=E(r,u=>u.sheetKey);!(i!=null&&i.sheetKey)||!i.sheetKey.includes(n)||(l?o.before:o.after)(i==null?void 0:i.content,"type",(u,I,F)=>{s(I,F)})}):typeof c.default=="function"&&o.after(c,"default",(d,[w],r)=>{s(w,r)})}const J=f("suppressEmbeds"),Q=f("openLazy","hideActionSheet"),A=k("SuppressEmbeds"),X=y("ic_close_circle_24px"),Z={...K,onStart(){W(A,"MessageLongPressActionSheet",(o,n)=>{var s,l;const c=o[0];if((l=(s=c.message)==null?void 0:s.embeds)!=null&&l.length){const a=E(n,r=>Array.isArray(r)&&r.find(i=>{var u;return typeof(i==null?void 0:i.key)=="string"&&typeof((u=i==null?void 0:i.props)==null?void 0:u.message)=="string"}));if(!a)return;const p=t.createElement(m,{label:"Suppress Embeds",leading:t.createElement(m.Icon,{source:X}),onPress:()=>{J.suppressEmbeds(c.message.channel_id,c.message.id),Q.hideActionSheet()}});let d=a.filter(r=>{var i;return((i=r.props)==null?void 0:i.message)===L.Messages.MESSAGE_ACTION_REPLY}),w=d!=null&&d.length?Number(d[0].key)+1:2;a.splice(w,0,p)}})},onStop(){A.unpatchAll()},getSettingsPanel({settings:o}){return t.createElement(q,{settings:o})}};C(Z);
